/* Theme variables */
:root{ --ink:#0b0b0c; --cream:#fff7ef; --ruby:#ff4d7a; --saffron:#ffd74a; --skies:#3a74ff; --shadow: 0 14px 36px rgba(0,0,0,.28); --radius: 22px; }
*{box-sizing:border-box}
html,body{height:100%}
body{ margin:0; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; color:var(--ink);
  background:
    linear-gradient(180deg, rgba(255,255,255,.42), rgba(255,255,255,.42)),
    url('assets/backgrounds/plad background.jpg');
  background-size: auto, 512px 512px;
}
main{max-width:1150px; margin:0 auto; padding:24px 16px 64px}

.cutout{font-family:Bangers; font-size:clamp(40px,10vw,86px); letter-spacing:1px; line-height:.9}
.cutout span{ display:inline-block; margin:.06em .08em; padding:.06em .18em; background:#ff6f8f; color:#fff; border-radius:6px; box-shadow: 2px 2px 0 #0b0b0c, -2px -2px 0 #0b0b0c, 0 6px 0 rgba(0,0,0,.35); transform: rotate(calc(var(--r, -3)*1deg)); }
.sub{margin-top:6px; font-weight:600}

.hero{ display:grid; gap:24px; grid-template-columns: 1fr; align-items:end; padding:18px 12px 12px; border-bottom: 3px solid rgba(0,0,0,.12); }
.player-card{ justify-self:start }

.player-card{display:grid; grid-template-columns:140px 1fr; gap:14px; align-items:center}
.album{width:140px; height:140px; object-fit:cover; border-radius:12px; box-shadow:var(--shadow)}
.cassette{background: #231f20; color:#fff; border-radius:16px; padding:14px 16px; display:flex; align-items:center; gap:16px; box-shadow:var(--shadow)}
.play{background:var(--ruby); border:none; color:white; width:48px; height:48px; border-radius:12px; font-size:18px; cursor:pointer}
.eq{display:flex; gap:3px; height:24px; align-items:flex-end}
.eq span{display:block; width:4px; background:var(--saffron); height:6px; border-radius:2px; opacity:.9}
.eq.playing span:nth-child(1){animation:bar 420ms ease-in-out infinite}
.eq.playing span:nth-child(2){animation:bar 560ms ease-in-out infinite}
.eq.playing span:nth-child(3){animation:bar 480ms ease-in-out infinite}
@keyframes bar{0%{height:6px}50%{height:22px}100%{height:6px}}
.time{margin-left:auto; font-variant-numeric:tabular-nums}

.collage{margin:26px 0 10px}
.stage-controls{display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin-bottom:10px}
.stage-controls button{ border:none; background:#111; color:#fff; border-radius:999px; padding:8px 14px; font-weight:700; cursor:pointer }
.stage-controls .hint{opacity:.7; font-size:.9rem}
.sticker-tray-wrap{margin:10px 0}
.sticker-title{margin:6px 0; font-weight:700}
.sticker-tray{ display:flex; gap:10px; overflow:auto; padding:8px; background:#fff; border-radius:12px; box-shadow: var(--shadow) }
.sticker{ flex:0 0 auto; width:96px; height:96px; display:grid; place-items:center; background:#f8f8f8; border-radius:10px; box-shadow: inset 0 0 0 1px rgba(0,0,0,.06); cursor:grab }
.sticker img{ max-width:90%; max-height:90%; object-fit:contain }
.stage{ position:relative; height:480px; border-radius:28px; overflow:hidden; background: radial-gradient(1200px 400px at 40% 40%, rgba(255,77,122,.28), transparent), radial-gradient(1000px 380px at 70% 60%, rgba(58,116,255,.22), transparent), url('assets/backgrounds/plad background.jpg'); background-size: auto, auto, 512px 512px; box-shadow: var(--shadow); }
.stage.grid::after{ content:""; position:absolute; inset:0; background-image: linear-gradient(to right, rgba(0,0,0,.06) 1px, transparent 1px), linear-gradient(to bottom, rgba(0,0,0,.06) 1px, transparent 1px); background-size: 40px 40px; pointer-events:none; }
.stage.halftone::before{ content:""; position:absolute; inset:0; pointer-events:none; mix-blend-mode:multiply; opacity:.5; background:
  radial-gradient(circle, rgba(0,0,0,.18) 1px, transparent 1.5px) 0 0/6px 6px,
  radial-gradient(circle, rgba(0,0,0,.12) 1px, transparent 2px) 3px 3px/8px 8px; }
.stage.torn{ position:relative }
.stage.torn::after{ content:""; position:absolute; inset:-8px; pointer-events:none; filter:drop-shadow(0 3px 6px rgba(0,0,0,.25));
  -webkit-mask: radial-gradient(10px 10px at 10px 10px, transparent 7px, black 8px), radial-gradient(10px 10px at calc(100% - 10px) 10px, transparent 7px, black 8px), radial-gradient(10px 10px at 10px calc(100% - 10px), transparent 7px, black 8px), radial-gradient(10px 10px at calc(100% - 10px) calc(100% - 10px), transparent 7px, black 8px);
  mask: radial-gradient(10px 10px at 10px 10px, transparent 7px, black 8px), radial-gradient(10px 10px at calc(100% - 10px) 10px, transparent 7px, black 8px), radial-gradient(10px 10px at 10px calc(100% - 10px), transparent 7px, black 8px), radial-gradient(10px 10px at calc(100% - 10px) calc(100% - 10px), transparent 7px, black 8px);
  background: #fff; border-radius: 32px; }
.stage::before{ /* paint splatter */ content:""; position:absolute; inset:0; pointer-events:none; background:
  radial-gradient(circle, rgba(255,77,122,.25) 0 4px, transparent 5px) 12% 28%/120px 120px,
  radial-gradient(circle, rgba(58,116,255,.25) 0 3px, transparent 4px) 70% 18%/90px 90px,
  radial-gradient(circle, rgba(0,0,0,.18) 0 2px, transparent 3px) 30% 70%/80px 80px;
}
.stage-sticker{position:absolute; width:90px; opacity:.85; filter: drop-shadow(0 12px 18px rgba(0,0,0,.35))}
/* Heart size tweak */
.stage-sticker[src$="heart.svg"]{ width:120px; }
.stage-sticker:nth-child(1){top:24px; left:24px}
.stage-sticker:nth-child(2){bottom:28px; right:34px}
.stage-sticker:nth-child(3){top:50%; left:-10px; transform:translateY(-50%) rotate(-18deg)}

.piece{ position:absolute; cursor:grab; user-select:none; filter: drop-shadow(0 16px 20px rgba(0,0,0,.35)); transform-origin:center; }
.piece:active{cursor:grabbing}
.piece.screen{mix-blend-mode:screen}
.piece.multiply{mix-blend-mode:multiply}
.piece.overlay{mix-blend-mode:overlay}

.piece.selected{outline:2px dashed #111; outline-offset:2px}
.piece .tools{position:absolute; top:-36px; left:0; display:flex; gap:6px; background:rgba(17,17,17,.9); color:#fff; padding:4px 6px; border-radius:8px; box-shadow:0 6px 16px rgba(0,0,0,.35); opacity:0; pointer-events:none; transition:opacity .15s ease}
.piece.show-tools .tools{opacity:1; pointer-events:auto}
.piece .tools button{border:none; background:#fff; color:#111; font-size:12px; padding:4px 6px; border-radius:6px; cursor:pointer}
.piece .tools button:hover{filter:brightness(0.95)}

/* hand-cut white border using multiple drop-shadows on alpha */
.piece.cutout img{ filter: drop-shadow(0 0 0 #fff) drop-shadow(0 0 2px #fff) drop-shadow(0 0 4px #fff) drop-shadow(0 0 6px #fff) drop-shadow(0 10px 14px rgba(0,0,0,.35)); }

.filter-0{filter:drop-shadow(0 16px 20px rgba(0,0,0,.35))}
.filter-1{filter:contrast(1.1) saturate(1.25) drop-shadow(0 16px 20px rgba(0,0,0,.35))}
.filter-2{filter:saturate(1.5) hue-rotate(-8deg) drop-shadow(0 16px 20px rgba(0,0,0,.35))}
.filter-3{filter:grayscale(.1) sepia(.12) contrast(1.2) drop-shadow(0 16px 20px rgba(0,0,0,.35))}

/* Intro overlay */
.start-overlay{ position:fixed; inset:0; display:grid; place-items:center; background:rgba(0,0,0,1); color:#fff; z-index:2000; pointer-events:auto; transition: transform .6s ease, opacity .6s ease; transform: translateY(0); }
.start-overlay.slide{ transform: translateY(-100%); opacity:0 }
.no-scroll{ overflow:hidden }
.piece img{ max-width:320px; height:auto; display:block }
.start-inner{ text-align:center; background:#111; padding:24px; border-radius:14px; box-shadow:var(--shadow) }
.start-inner h2{ margin:0 0 6px }

/* Intro collage */
.intro{ position:relative; height:600vh; overflow:hidden; }
.intro-stage{ position:absolute; inset:0; pointer-events:none }
.intro.hide{ display:none }

.scrapbook-title{font-family:Bangers; margin:26px 0 8px; font-size:32px; letter-spacing:1px}
.scrapbook{display:grid; gap:18px; grid-template-columns:repeat(auto-fill, minmax(220px,1fr));}
.polaroid{background:#fff; padding:10px; border-radius:10px; box-shadow: var(--shadow); transform:rotate(var(--tilt, -1deg)); transition:.15s transform}
.polaroid:hover{transform:translateY(-4px) rotate(0deg)}
.polaroid img{width:100%; height:220px; object-fit:cover; border-radius:6px}
.polaroid figcaption{text-align:center; margin-top:6px; font-weight:600}

.love-note-title{font-family:Bangers; margin:28px 0 8px; font-size:30px}
.note{display:grid; gap:12px; justify-items:center; margin:16px 0 40px}
.note-card{ max-width:900px; width:100%; min-height:160px; padding:24px; background:#ffffffcf; backdrop-filter: blur(6px); border-radius:var(--radius); box-shadow:var(--shadow) }
.note-card p{font-family:Caveat, Inter; font-size:clamp(22px,3vw,34px); margin:0; white-space:pre-wrap}
.note-actions button{background:var(--saffron); border:none; padding:10px 14px; border-radius:10px; font-weight:700; cursor:pointer; margin-right:8px}

.secret[hidden]{display:none}
.secret-inner{margin:18px auto; padding:24px; background:#fff7; backdrop-filter: blur(10px); border-radius:var(--radius); text-align:center; box-shadow:var(--shadow)}
.secret-inner h2{font-family:Bangers; font-size:48px; color:var(--ruby); text-shadow:2px 2px 0 #fff}

footer{margin:24px 0 12px; text-align:center; opacity:.75; font-size:14px}
.tiny-icons{margin-top:6px; opacity:.6}
/* Utility */
.visually-hidden{position:absolute!important; height:1px; width:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); white-space:nowrap}
